# 产品需求文档（PRD）：YourMemory 浏览器插件 MVP

**版本**：1.0  
**日期**：2025-02-11  
**目标**：14 天内可交付、可验证价值的极简 MVP  

---

## 1. 执行摘要

### 问题陈述

用户在不同 AI 对话网站（如 ChatGPT、Claude）之间切换时，AI 没有“记忆”，导致需要反复解释项目背景、约束和进度，产生“失忆”和“重复解释”的痛点。不涉及抓包、代理或复杂自动化。

### 提案（一句话）

**跨 AI 网站的本地记忆卡 + 一键注入**——用户主动生成结构化记忆、本地存储，在任意支持的 AI 站点输入时获得“相关记忆可注入”的建议，由用户决定是否插入。

### 成功标准（可验证）

| 指标 | 说明 | MVP 验证方式 |
|------|------|----------------|
| 记忆卡生成率 | 用户是否主动点击「生成记忆卡」 | 事件统计 |
| 记忆注入使用次数 | 用户点击「插入记忆」并使用的次数 | 事件统计 |
| 重复解释是否减少 | 主观或轻量问卷：换站后是否还需重复说明 | 用户反馈 / 可选问卷 |

**核心验证**：若「插入记忆」没有自然发生，则产品价值存疑，需迭代或收敛。

### Why Now

- 多 AI 产品并存成为常态，跨站记忆成为刚需。
- 仅做“记忆管家”、不做“对话控制器”，实现成本可控，适合 14 天 MVP 验证。

---

## 2. 用户与功能

### 用户角色

- **主用户**：频繁在 ChatGPT、Claude 等站点间切换，需要带“上下文”继续对话的产品/开发/写作者。
- **诉求**：少重复解释、多复用已确认的事实与约束。

### 核心能力（仅三件事）

| 能力 | 说明 | 优先级 |
|------|------|--------|
| 1. 自动生成记忆卡 | 对话达到一定长度时，页面右侧展示「生成记忆卡」；点击后生成结构化记忆并存本地 | Must |
| 2. 跨站“可注入记忆”提示 | 输入时检测与本地记忆的相似度，在输入框旁展示「检测到 N 条相关记忆」，点击后建议插入，用户可删 | Must |
| 3. 记忆管理页 | Popup：列表、搜索、删除、固定、过期（如 30 天归档） | Must |

### User Stories 与验收标准

#### Epic 1：生成记忆卡

**Story 1.1**  
作为用户，我希望在对话较长时看到「生成记忆卡」入口，以便把当前对话提炼成可复用的记忆。

- **AC**
  - 支持站点：ChatGPT、Claude（第一版仅此两个）。
  - 当对话轮数 ≥ 6（或可配置）时，在页面右侧显示「生成记忆卡」按钮。
  - 点击后，用当前对话内容生成结构化记忆：当前目标、已确认事实、关键约束、当前进度、不要做的事。
  - 记忆存到本地（IndexedDB 或 localStorage），不依赖后端。

**Story 1.2**  
作为用户，我希望在希望“被记住”时也能主动生成记忆，而不是只能等轮数。

- **AC**
  - 支持用户主动点击生成；可选：检测“总结/记录/记住”等词汇时提示可生成，但不自动强制生成。

---

#### Epic 2：跨站“可注入记忆”建议

**Story 2.1**  
作为用户，我在任意支持的 AI 站点开始输入时，希望被提示“有相关记忆可注入”，以便减少重复解释。

- **AC**
  - 输入时（如 focus/输入变化）检测：当前输入语义 + 本地记忆卡。
  - 相似度达到阈值时，在输入框旁显示小浮层：「检测到 N 条相关记忆」。
  - 用户点击后，在输入框顶部插入建议文案（如“补充背景信息：…”），用户可编辑或删除。
  - 不自动插入内容，仅建议；不弹窗、不频繁打扰。

**Story 2.2**  
作为用户，我希望插入的内容格式清晰，便于 AI 理解。

- **AC**
  - 插入格式固定为简短列表（如“补充背景信息：- 条目1 - 条目2”），可配置前缀文案。

---

#### Epic 3：记忆管理

**Story 3.1**  
作为用户，我需要在插件 Popup 中查看、搜索、删除和固定记忆卡。

- **AC**
  - Popup 列出所有记忆卡（标题/摘要 + 时间）。
  - 支持搜索（标题/内容关键词）。
  - 支持删除单条、固定（pin）置顶。
  - 支持过期机制：如 30 天自动归档（可配置），归档后仍可搜索/恢复或清理。

---

### Non-Goals（明确不做）

- 不抓包、不代理、不复杂自动化。
- 不自动改写用户 prompt、不自动插入内容（只建议）。
- 不做侧边栏、复杂面板、常驻 UI；仅两种露出：生成记忆卡按钮、输入框旁“可插入记忆”提示。
- 不做 token 统计当主卖点；不做全电脑范围的“记忆操作系统”（留作后续阶段）。

---

## 3. 技术规格

### 架构概览

- **插件类型**：浏览器扩展（Manifest V3 优先）。
- **数据**：全部本地，无必选后端。

### 目录与职责

```
/manifest.json
/content.js          # 注入页面：抓取对话 DOM、展示「生成记忆卡」与「可注入记忆」浮层
/background.js       # 记忆管理、存储协调、可选定时归档
/popup.html + popup.js  # 记忆库 UI：列表、搜索、删除、固定、过期
/embeddings.js      # 简单匹配（MVP：关键词/标题/TF-IDF；后续可换本地 embedding）
/storage.js         # 本地存储封装（IndexedDB 或 localStorage）
```

### 关键实现点

| 点 | 方案 |
|----|------|
| 获取对话内容 | Content script 监听 DOM，抓取对话容器，提取用户消息 + AI 消息；不依赖官方 API。 |
| 相关记忆匹配 | MVP：关键词匹配、标题匹配、TF-IDF。后续可升级：本地 MiniLM ONNX 或云端 embedding。 |
| 何时展示「生成记忆卡」 | 规则：对话轮数 > N 或用户点击；可选：检测“总结/记录/记住”等词时提示。不强制自动生成。 |

### 安全与隐私

- 数据仅存本地，不上传；若未来增加云端可选能力，需单独说明并征得同意。
- 不读取与记忆无关的页面内容，不修改用户未同意的输入。

---

## 4. 交互与体验（极简原则）

- **无侧边栏、无复杂面板、无常驻 UI。**
- **仅两种露出**：
  1. 生成记忆卡按钮（在对话区右侧等合适位置）。
  2. 输入框旁边“可插入记忆”的小浮层。
- 其余时间插件“隐形”，不打扰。

---

## 5. 风险与路线图

### 技术风险

| 风险 | 概率 | 影响 | 缓解 |
|------|------|------|------|
| ChatGPT/Claude DOM 变更 | 中 | 抓取失败 | 选择相对稳定的选择器；预留配置或版本分支。 |
| 匹配效果差 | 中 | 推荐不准、用户不用 | MVP 用简单规则；快速收集“是否有用”反馈，再迭代匹配策略。 |
| 存储容量/性能 | 低 | 卡顿或满 | 单条记忆大小限制、条数上限、定期归档。 |

### 14 天开发节奏（建议）

| 阶段 | 天数 | 内容 |
|------|------|------|
| Day 1–2 | 2 | 插件骨架、Manifest、Content script 注入；识别 ChatGPT 对话 DOM。 |
| Day 3 | 1 | 抓取对话内容（ChatGPT + Claude）。 |
| Day 4 | 1 | 生成结构化记忆卡并写入本地存储。 |
| Day 5 | 1 | 输入框检测 + “可注入记忆”浮层与插入逻辑。 |
| Day 6 | 1 | 简单匹配逻辑（关键词/标题/TF-IDF）。 |
| Day 7 | 1 | Popup 记忆管理（列表、搜索、删除、固定、过期）。 |
| Day 8–10 | 3 | 联调、边界情况、UI 打磨。 |
| Day 11–14 | 4 | 内测、收集“生成/插入”数据与主观反馈，验证价值。 |

---

## 6. 产品决策上下文（战略选择）

文档不替产品做战略选择，但建议在 MVP 前想清楚：

- **A. 能赚钱的产品** → 更偏实用插件：功能收敛、体验稳定、可定价或增值。
- **B. 有战略空间的平台** → 预留扩展点：多站点、多端、可选云端记忆与协作。
- **C. 证明判断力的作品** → 更偏验证假设：指标清晰、迭代快、可对外复盘。

当前 PRD 按 **A+C** 设计：先做出实用、可验证的插件，用 14 天验证“插入记忆是否自然发生”；若成立，再考虑是否往 B 延伸（如“AI 时代的记忆操作系统”）。

---

## 7. 附录：需求追溯

| 业务目标 | 功能/Story | 成功指标 |
|----------|------------|----------|
| 解决 AI 失忆与重复解释 | Epic 1 生成记忆卡 | 用户主动生成次数 |
| 跨站复用记忆 | Epic 2 可注入记忆建议 | 插入记忆使用次数 |
| 用户可管理记忆 | Epic 3 记忆管理 | 使用 Popup 管理的行为 |
| 验证产品价值 | 全流程 | 插入记忆是否自然发生、重复解释是否减少 |

---

*本文档基于 PRD/产品相关 skills（prd、product-manager、writing-prds）规范整理，聚焦 14 天 MVP 与价值验证。*
